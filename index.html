<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>מערכת CRM - רישום והתחברות</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <!-- רישום משתמש חדש -->
    <div id="registerScreen">
      <h1>רישום משתמש חדש</h1>
      <input type="email" id="regEmail" placeholder="אימייל" />
      <input type="password" id="regPassword" placeholder="סיסמה" />
      <button onclick="register()">צור חשבון</button>
      <p>כבר רשום? <a href="#" onclick="toggleScreens('login')">התחבר כאן</a></p>
    </div>

    <!-- התחברות -->
    <div id="loginScreen" style="display:none;">
      <h1>התחברות</h1>
      <input type="email" id="loginEmail" placeholder="אימייל" />
      <input type="password" id="loginPassword" placeholder="סיסמה" />
      <button onclick="login()">התחבר</button>
      <p>אין לך חשבון? <a href="#" onclick="toggleScreens('register')">צור אחד</a></p>
    </div>

    <!-- ברוך הבא -->
    <div id="welcomeScreen" style="display:none;">
      <h2 id="welcomeMessage"></h2>
      <button onclick="goToMain()">המשך למערכת</button>
    </div>

    <!-- מסך ניהול CRM -->
    <div id="mainScreen" style="display:none;">
      <h2>מערכת CRM</h2>
      <button onclick="alert('רכישת מזוזות')">רכישת מזוזות</button>
      <button onclick="alert('בדיקת מזוזות')">בדיקת מזוזות</button>
      <button onclick="logout()">התנתק</button>
    </div>
  </div>

  <script>
    function toggleScreens(screen) {
      const screens = ["registerScreen", "loginScreen", "welcomeScreen", "mainScreen"];
      screens.forEach(id => {
        document.getElementById(id).style.display = id === `${screen}Screen` ? "block" : "none";
      });
    }

    function register() {
      const email = document.getElementById("regEmail").value.trim().toLowerCase();
      const password = document.getElementById("regPassword").value;

      if (!email || !password) {
        alert("נא למלא את כל השדות");
        return;
      }

      localStorage.setItem("userEmail", email);
      localStorage.setItem("userPassword", password);
      alert("החשבון נוצר בהצלחה!");
      toggleScreens("login");
    }

    function login() {
      const email = document.getElementById("loginEmail").value.trim().toLowerCase();
      const password = document.getElementById("loginPassword").value;

      const savedEmail = localStorage.getItem("userEmail");
      const savedPassword = localStorage.getItem("userPassword");

      if (email === savedEmail && password === savedPassword) {
        toggleScreens("welcome");
        document.getElementById("welcomeMessage").textContent = `שלום ${email}`;
      } else {
        alert("אימייל או סיסמה שגויים");
      }
    }

    function goToMain() {
      toggleScreens("main");
    }

    function logout() {
      toggleScreens("login");
    }
  </script>
</body>
</html>